{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\Internship\\\\thet_HAJ\\\\new_admin\\\\pages\\\\data_input.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { loadFirebase } from '../lib/db.js';\n\nvar AreaInput = /*#__PURE__*/function (_React$Component) {\n  _inherits(AreaInput, _React$Component);\n\n  var _super = _createSuper(AreaInput);\n\n  function AreaInput() {\n    var _this;\n\n    _classCallCheck(this, AreaInput);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      cities: [\"Matsuyama\", \"Imabari\", \"Niihama\", \"Saijo\", \"Shikokuchuo\", \"Uwaima\", \"Ozu\", \"Seiyo\", \"Lyo\", \"Yawatahama\", \"Toon\", \"Masaki\", \"Ainan\", \"Tobe\", \"Uchiko\", \"Kihoku\", \"Ikata\", \"Kumakagen\", \"Kamijima\"],\n      area_id: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n\n      console.log(event.target.value);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (event) {\n      event.preventDefault();\n      var firebase = loadFirebase();\n\n      for (var i = 0; i < _this.state.cities.length; i++) {\n        try {\n          firebase.firestore().collection('city').add({\n            name: _this.state.cities[i],\n            area_id: _this.state.area_id\n          });\n          console.log(\"new city added \".concat(_this.state.name));\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(AreaInput, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var areas = this.props.areas;\n      return __jsx(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }\n      }, __jsx(\"select\", {\n        name: \"area_id\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }\n      }, areas && areas.map(function (area) {\n        return __jsx(\"option\", {\n          value: area.id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }\n        }, area.data.areaName);\n      })), __jsx(\"button\", {\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }\n      }, \"Submit\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n        var req, res, query, firebase, areas, querySnapshotUser;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req, res = _ref.res, query = _ref.query;\n                firebase = loadFirebase();\n                areas = [];\n                _context.next = 5;\n                return firebase.firestore().collection('area').get();\n\n              case 5:\n                querySnapshotUser = _context.sent;\n                querySnapshotUser.forEach(function (doc) {\n                  areas.push(Object.assign({\n                    id: doc.id,\n                    data: doc.data()\n                  }));\n                });\n                return _context.abrupt(\"return\", {\n                  areas: areas\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return AreaInput;\n}(React.Component);\n\nexport { AreaInput as default };","map":{"version":3,"sources":["D:/Internship/thet_HAJ/new_admin/pages/data_input.js"],"names":["loadFirebase","AreaInput","cities","area_id","event","setState","target","name","value","console","log","preventDefault","firebase","i","state","length","firestore","collection","add","error","areas","props","handleChange","map","area","id","data","areaName","handleSubmit","req","res","query","get","querySnapshotUser","forEach","doc","push","Object","assign","React","Component"],"mappings":"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","sourcesContent":["import {loadFirebase} from '../lib/db.js'\r\n\r\nexport default class AreaInput extends React.Component{\r\n    static async getInitialProps ({req,res,query}){\r\n        let firebase = loadFirebase()\r\n        let areas = []\r\n        const querySnapshotUser = await firebase.firestore().collection('area').get()\r\n\r\n        querySnapshotUser.forEach(doc => {\r\n            areas.push(Object.assign(\r\n                {id : doc.id,\r\n              data : doc.data()}\r\n            ))\r\n          })\r\n        return {areas}\r\n    }\r\n    state = {\r\n        cities : [\r\n            \"Matsuyama\",\r\n            \"Imabari\",\r\n            \"Niihama\",\r\n            \"Saijo\",\r\n            \"Shikokuchuo\",\r\n            \"Uwaima\",\r\n            \"Ozu\",\r\n            \"Seiyo\",\r\n            \"Lyo\",\r\n            \"Yawatahama\",\r\n            \"Toon\",\r\n            \"Masaki\",\r\n            \"Ainan\",\r\n            \"Tobe\",\r\n            \"Uchiko\",\r\n            \"Kihoku\",\r\n            \"Ikata\",\r\n            \"Kumakagen\",\r\n            \"Kamijima\"\r\n\r\n        ],\r\n        area_id : ''\r\n    }\r\n\r\n    handleChange = (event)=>{\r\n        this.setState({[event.target.name] : event.target.value})\r\n        console.log(event.target.value)\r\n    }\r\n    handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        let firebase = loadFirebase()\r\n        for(var i = 0;i<this.state.cities.length;i++){\r\n            try{\r\n                firebase.firestore().collection('city').add({name : this.state.cities[i], area_id : this.state.area_id})\r\n                console.log(`new city added ${this.state.name}`)\r\n            }catch (error){\r\n                console.log(error)\r\n            }\r\n        }\r\n        \r\n    } \r\n    render (){\r\n        const areas = this.props.areas\r\n        return (\r\n            <form>\r\n                \r\n                <select name=\"area_id\" onChange={this.handleChange}>\r\n                    {areas && areas.map(area => (\r\n                        <option value={area.id}>{area.data.areaName}</option>\r\n                    ))}\r\n                </select>\r\n                <button onClick={this.handleSubmit}>Submit</button>\r\n            </form>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}